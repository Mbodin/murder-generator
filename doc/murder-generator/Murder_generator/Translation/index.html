<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"><head><title>Translation (murder-generator.Murder_generator.Translation)</title><link rel="stylesheet" href="../../../odoc.css"/><meta charset="utf-8"/><meta name="generator" content="odoc 1.5.0"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><script src="../../../highlight.pack.js"></script><script>hljs.initHighlightingOnLoad();</script></head><body><div class="content"><header><nav><a href="../index.html">Up</a> – <a href="../../index.html">murder-generator</a> &#x00BB; <a href="../index.html">Murder_generator</a> &#x00BB; Translation</nav><h1>Module <code>Murder_generator.Translation</code></h1></header><aside><p>Module Translation. Provides utilities to store and deal with translations.</p></aside><dl><dt class="spec type" id="type-language"><a href="#type-language" class="anchor"></a><code><span class="keyword">type</span> language</code></dt><dd><p>The type of language.</p></dd></dl><dl><dt class="spec value" id="val-generic"><a href="#val-generic" class="anchor"></a><code><span class="keyword">val</span> generic : <a href="index.html#type-language">language</a></code></dt><dd><p>A special “language” for internal use. It typically stores the developping name of each object.</p></dd></dl><dl><dt class="spec type" id="type-tag"><a href="#type-tag" class="anchor"></a><code><span class="keyword">type</span> tag</code></dt><dd><p>The type of grammatical tags. A tag can be used to represent any language case (accusative, genitive, locative, etc., but also less frequent ones like aversive or abessive) as well as more fundamental language notions (gender of words, specific inflexions, noun classes, etc.).</p></dd></dl><dl><dt class="spec value" id="val-base"><a href="#val-base" class="anchor"></a><code><span class="keyword">val</span> base : <a href="index.html#type-tag">tag</a></code></dt><dd><p>A special tag to mean that the translation only applies for the generic object and not its instances.</p></dd></dl><dl><dt class="spec type" id="type-command"><a href="#type-command" class="anchor"></a><code><span class="keyword">type</span> command</code><code> = <span>bool option</span> * <a href="index.html#type-tag">tag</a></code></dt><dd><p>A tag command. It can be either associated to <code>None</code>: it is then a constraint. It can also be associated to a boolean: and it then becomes a command. If the boolean is <code>true</code>, this tag is added when evaluated the variable, if <code>false</code>, the command is removed. This is for instance handy for gendered languages where the name of a group might not be of the same gender than each of its components.</p></dd></dl><dl><dt class="spec value" id="val-get_tag"><a href="#val-get_tag" class="anchor"></a><code><span class="keyword">val</span> get_tag : string <span>&#45;&gt;</span> <a href="index.html#type-tag">tag</a></code></dt><dd><p>Imports tags. Tags are expressed as any lowercase string and depends on the language.</p></dd></dl><dl><dt class="spec value" id="val-print_tag"><a href="#val-print_tag" class="anchor"></a><code><span class="keyword">val</span> print_tag : <a href="index.html#type-tag">tag</a> <span>&#45;&gt;</span> string</code></dt><dd><p>Export back a tag.</p></dd></dl><dl><dt class="spec type" id="type-t"><a href="#type-t" class="anchor"></a><code><span class="keyword">type</span> <span>'a t</span></code></dt><dd><p>A type to store informations about translations for a given type. It is a simple representation: for each language, we can get a translation of the stored objects.</p></dd></dl><dl><dt class="spec type" id="type-gt"><a href="#type-gt" class="anchor"></a><code><span class="keyword">type</span> <span>'a gt</span></code></dt><dd><p>This type is for more advanced translations where grammar has to be involved.</p></dd></dl><dl><dt class="spec type" id="type-st"><a href="#type-st" class="anchor"></a><code><span class="keyword">type</span> <span>('a, 'b) st</span></code></dt><dd><p>This type is for even more advanced translations involving sentences with a lot of grammar. Sentences involve partial translations, with symbolic variables. The type <code>'b</code> represents these variables.</p></dd></dl><dl><dt class="spec type" id="type-sitem"><a href="#type-sitem" class="anchor"></a><code><span class="keyword">type</span> <span>'b sitem</span></code><code> = </code><table class="variant"><tr id="type-sitem.Direct" class="anchored"><td class="def constructor"><a href="#type-sitem.Direct" class="anchor"></a><code>| </code><code><span class="constructor">Direct</span> <span class="keyword">of</span> string</code></td><td class="doc"><p>A direct translation given as a string</p></td></tr><tr id="type-sitem.Variable" class="anchored"><td class="def constructor"><a href="#type-sitem.Variable" class="anchor"></a><code>| </code><code><span class="constructor">Variable</span> <span class="keyword">of</span> <span class="type-var">'b</span> * <span><a href="index.html#type-tag">tag</a> Libutils.PSet.t</span> * <span><a href="index.html#type-tag">tag</a> Libutils.PSet.t</span> * <span><a href="index.html#type-tag">tag</a> Libutils.PSet.t</span></code></td><td class="doc"><p>A variable, which is supposed associated with its own translations. The variable is associates three sets:</p><ul><li>the first one is the constraints over the variable,</li><li>the second one is the added tags when fetching the translation of this variable,</li><li>the third is the removed tags when fetching the translation of the variable.</li></ul></td></tr></table></dt><dd><p>This type lists the possible elements in a partial sentence. Items’s result are concatenated (separated by space) to form the overall translation.</p></dd></dl><dl><dt class="spec value" id="val-variable"><a href="#val-variable" class="anchor"></a><code><span class="keyword">val</span> variable : <span class="type-var">'b</span> <span>&#45;&gt;</span> <span><a href="index.html#type-command">command</a> list</span> <span>&#45;&gt;</span> <span><span class="type-var">'b</span> <a href="index.html#type-sitem">sitem</a></span></code></dt><dd><p>A smart constructor for <code>Variable</code> taking a list of commands instead of three sets.</p></dd></dl><dl><dt class="spec value" id="val-sitem_map"><a href="#val-sitem_map" class="anchor"></a><code><span class="keyword">val</span> sitem_map : <span>(<span class="type-var">'a</span> <span>&#45;&gt;</span> <span class="type-var">'b</span>)</span> <span>&#45;&gt;</span> <span><span class="type-var">'a</span> <a href="index.html#type-sitem">sitem</a></span> <span>&#45;&gt;</span> <span><span class="type-var">'b</span> <a href="index.html#type-sitem">sitem</a></span></code></dt><dd><p>Change the variables used in a sentence item.</p></dd></dl><dl><dt class="spec value" id="val-iso639"><a href="#val-iso639" class="anchor"></a><code><span class="keyword">val</span> iso639 : <a href="index.html#type-language">language</a> <span>&#45;&gt;</span> string</code></dt><dd><p>Returns the two/three-letters code corresponding to the provided language.</p></dd></dl><dl><dt class="spec value" id="val-from_iso639"><a href="#val-from_iso639" class="anchor"></a><code><span class="keyword">val</span> from_iso639 : string <span>&#45;&gt;</span> <a href="index.html#type-language">language</a></code></dt><dd><p>Converts the two/three-letters code to the corresponding language.</p></dd></dl><dl><dt class="spec value" id="val-empty"><a href="#val-empty" class="anchor"></a><code><span class="keyword">val</span> empty : <span><span class="type-var">'a</span> <a href="index.html#type-t">t</a></span></code></dt><dd><p>Empty maps.</p></dd></dl><dl><dt class="spec value" id="val-gempty"><a href="#val-gempty" class="anchor"></a><code><span class="keyword">val</span> gempty : <span><span class="type-var">'a</span> <a href="index.html#type-gt">gt</a></span></code></dt><dt class="spec value" id="val-sempty"><a href="#val-sempty" class="anchor"></a><code><span class="keyword">val</span> sempty : <span><span>(<span class="type-var">'a</span>, <span class="type-var">'b</span>)</span> <a href="index.html#type-st">st</a></span></code></dt><dt class="spec value" id="val-add"><a href="#val-add" class="anchor"></a><code><span class="keyword">val</span> add : <span><span class="type-var">'a</span> <a href="index.html#type-t">t</a></span> <span>&#45;&gt;</span> <a href="index.html#type-language">language</a> <span>&#45;&gt;</span> <span class="type-var">'a</span> <span>&#45;&gt;</span> string <span>&#45;&gt;</span> <span><span class="type-var">'a</span> <a href="index.html#type-t">t</a></span></code></dt><dd><p>Add a translation to an object.</p></dd></dl><dl><dt class="spec exception" id="exception-ConflictingCommands"><a href="#exception-ConflictingCommands" class="anchor"></a><code><span class="keyword">exception</span> </code><code><span class="exception">ConflictingCommands</span> <span class="keyword">of</span> <a href="index.html#type-command">command</a> * <a href="index.html#type-command">command</a></code></dt><dd><p>Returned by <code>gadd</code> and <code>sadd</code> when given commands that conflicts with each others (typically when the same tag is both added and removed).</p></dd></dl><dl><dt class="spec value" id="val-gadd"><a href="#val-gadd" class="anchor"></a><code><span class="keyword">val</span> gadd : <span><span class="type-var">'a</span> <a href="index.html#type-gt">gt</a></span> <span>&#45;&gt;</span> <a href="index.html#type-language">language</a> <span>&#45;&gt;</span> <span><a href="index.html#type-command">command</a> list</span> <span>&#45;&gt;</span> <span class="type-var">'a</span> <span>&#45;&gt;</span> string <span>&#45;&gt;</span> <span><span class="type-var">'a</span> <a href="index.html#type-gt">gt</a></span></code></dt><dd><p>Add a translation to an object with a specification on the tags where this translation applies. Tags should be ordered consistently across translations, with the most important at the beginning of the list.</p></dd></dl><dl><dt class="spec value" id="val-sadd"><a href="#val-sadd" class="anchor"></a><code><span class="keyword">val</span> sadd : <span><span>(<span class="type-var">'a</span>, <span class="type-var">'b</span>)</span> <a href="index.html#type-st">st</a></span> <span>&#45;&gt;</span> <a href="index.html#type-language">language</a> <span>&#45;&gt;</span> <span><a href="index.html#type-command">command</a> list</span> <span>&#45;&gt;</span> <span class="type-var">'a</span> <span>&#45;&gt;</span> <span><span><span class="type-var">'b</span> <a href="index.html#type-sitem">sitem</a></span> list</span> <span>&#45;&gt;</span> <span><span>(<span class="type-var">'a</span>, <span class="type-var">'b</span>)</span> <a href="index.html#type-st">st</a></span></code></dt><dd><p>Similar to <code>gadd</code> but for sentences.</p></dd></dl><dl><dt class="spec value" id="val-translate"><a href="#val-translate" class="anchor"></a><code><span class="keyword">val</span> translate : <span><span class="type-var">'a</span> <a href="index.html#type-t">t</a></span> <span>&#45;&gt;</span> <a href="index.html#type-language">language</a> <span>&#45;&gt;</span> <span class="type-var">'a</span> <span>&#45;&gt;</span> <span>string option</span></code></dt><dd><p>Translates an object to a given language. Returns <code>None</code> if the object has not been translated to this language.</p></dd></dl><dl><dt class="spec value" id="val-force_translate"><a href="#val-force_translate" class="anchor"></a><code><span class="keyword">val</span> force_translate : <span>?&#8288;debug:<span>(<span class="type-var">'a</span> <span>&#45;&gt;</span> <span>string option</span>)</span></span> <span>&#45;&gt;</span> <span><span class="type-var">'a</span> <a href="index.html#type-t">t</a></span> <span>&#45;&gt;</span> <a href="index.html#type-language">language</a> <span>&#45;&gt;</span> <span class="type-var">'a</span> <span>&#45;&gt;</span> string</code></dt><dd><p>Calls <code>translate</code>, and finds a way to translate it anyway. The additional debugging argument helps understanding from where came a missing translation.</p></dd></dl><dl><dt class="spec type" id="type-translation_function"><a href="#type-translation_function" class="anchor"></a><code><span class="keyword">type</span> <span>'a translation_function</span></code><code> = <span class="type-var">'a</span> <span>&#45;&gt;</span> <span><a href="index.html#type-tag">tag</a> Libutils.PSet.t</span> <span>&#45;&gt;</span> <span><span>(string * <span><a href="index.html#type-tag">tag</a> Libutils.PSet.t</span>)</span> option</span></code></dt><dd><p>Translation functions involving grammar have the following type. See <code>gtranslate</code> for more details.</p></dd></dl><dl><dt class="spec type" id="type-complete_translation_function"><a href="#type-complete_translation_function" class="anchor"></a><code><span class="keyword">type</span> <span>'a complete_translation_function</span></code><code> = <span class="type-var">'a</span> <span>&#45;&gt;</span> <span><a href="index.html#type-tag">tag</a> Libutils.PSet.t</span> <span>&#45;&gt;</span> string * <span><a href="index.html#type-tag">tag</a> Libutils.PSet.t</span></code></dt><dd><p>An alternative to <code>translation_function</code> where the function uses heuristics to always return a result.</p></dd></dl><dl><dt class="spec value" id="val-gtranslate"><a href="#val-gtranslate" class="anchor"></a><code><span class="keyword">val</span> gtranslate : <span><span class="type-var">'a</span> <a href="index.html#type-gt">gt</a></span> <span>&#45;&gt;</span> <a href="index.html#type-language">language</a> <span>&#45;&gt;</span> <span><span class="type-var">'a</span> <a href="index.html#type-translation_function">translation_function</a></span></code></dt><dd><p>Translates an object to a given language. Each tag associated with the return value is assured to be given as argument. If there are several matching possible values, then a maximal one is chosen, in the sense that there should not be another solution whose associated matching tags are strictly greater (in term of list inclusion, not list length) then the returned value. List length is not considered. Instead, tags are considered as they have been used in the declaration of translation (if provided consistently). With the returned translation, a set of additional tags is returned: these are meant to be added to the grammar construct that is being translated. Typically, if a generic translation is gendered, this gender has to be propagated to the rest of the sentence even though the original notion was not directly gendered.</p></dd></dl><dl><dt class="spec value" id="val-gforce_translate"><a href="#val-gforce_translate" class="anchor"></a><code><span class="keyword">val</span> gforce_translate : <span>?&#8288;debug:<span>(<span class="type-var">'a</span> <span>&#45;&gt;</span> <span>string option</span>)</span></span> <span>&#45;&gt;</span> <span><span class="type-var">'a</span> <a href="index.html#type-gt">gt</a></span> <span>&#45;&gt;</span> <a href="index.html#type-language">language</a> <span>&#45;&gt;</span> <span><span class="type-var">'a</span> <a href="index.html#type-complete_translation_function">complete_translation_function</a></span></code></dt><dd><p>Similar to <code>gtranslate</code>, but will try to find a translation following some heuristics (but no guarantee is provided about them).</p></dd></dl><dl><dt class="spec value" id="val-stranslate"><a href="#val-stranslate" class="anchor"></a><code><span class="keyword">val</span> stranslate : <span><span>(<span class="type-var">'a</span>, <span class="type-var">'b</span>)</span> <a href="index.html#type-st">st</a></span> <span>&#45;&gt;</span> <a href="index.html#type-language">language</a> <span>&#45;&gt;</span> <span>(<span class="type-var">'b</span> <span>&#45;&gt;</span> <span><a href="index.html#type-tag">tag</a> Libutils.PSet.t</span>)</span> <span>&#45;&gt;</span> <span><span class="type-var">'b</span> <a href="index.html#type-translation_function">translation_function</a></span> <span>&#45;&gt;</span> <span><span class="type-var">'a</span> <a href="index.html#type-translation_function">translation_function</a></span></code></dt><dd><p>Like <code>gtranslate</code> but for sentences. It is supposed to be given a translation function for the variables, as well as a function providing for each variable its natural tags.</p></dd></dl><dl><dt class="spec value" id="val-sforce_translate"><a href="#val-sforce_translate" class="anchor"></a><code><span class="keyword">val</span> sforce_translate : <span>?&#8288;debug:<span>(<span class="type-var">'a</span> <span>&#45;&gt;</span> <span>string option</span>)</span></span> <span>&#45;&gt;</span> <span><span>(<span class="type-var">'a</span>, <span class="type-var">'b</span>)</span> <a href="index.html#type-st">st</a></span> <span>&#45;&gt;</span> <a href="index.html#type-language">language</a> <span>&#45;&gt;</span> <span>(<span class="type-var">'b</span> <span>&#45;&gt;</span> <span><a href="index.html#type-tag">tag</a> Libutils.PSet.t</span>)</span> <span>&#45;&gt;</span> <span><span class="type-var">'b</span> <a href="index.html#type-translation_function">translation_function</a></span> <span>&#45;&gt;</span> <span><span class="type-var">'a</span> <a href="index.html#type-complete_translation_function">complete_translation_function</a></span></code></dt><dd><p>Similar to <code>stranslate</code>, but never fails.</p></dd></dl><dl><dt class="spec value" id="val-smap_option"><a href="#val-smap_option" class="anchor"></a><code><span class="keyword">val</span> smap_option : <span>(<span class="type-var">'b</span> <span>&#45;&gt;</span> <span><span class="type-var">'c</span> option</span>)</span> <span>&#45;&gt;</span> <span><span>(<span class="type-var">'a</span>, <span class="type-var">'b</span>)</span> <a href="index.html#type-st">st</a></span> <span>&#45;&gt;</span> <span><span><span>(<span class="type-var">'a</span>, <span class="type-var">'c</span>)</span> <a href="index.html#type-st">st</a></span> option</span></code></dt><dd><p>Update the variables used in a translation object.</p></dd></dl><dl><dt class="spec value" id="val-gall_translations"><a href="#val-gall_translations" class="anchor"></a><code><span class="keyword">val</span> gall_translations : <span><span class="type-var">'a</span> <a href="index.html#type-gt">gt</a></span> <span>&#45;&gt;</span> <a href="index.html#type-language">language</a> <span>&#45;&gt;</span> <span class="type-var">'a</span> <span>&#45;&gt;</span> <span>string list</span></code></dt><dd><p>Return all the possible translations of a given object, regardless of the context.</p></dd></dl><dl><dt class="spec value" id="val-sall_translations"><a href="#val-sall_translations" class="anchor"></a><code><span class="keyword">val</span> sall_translations : <span><span>(<span class="type-var">'a</span>, <span class="type-var">'b</span>)</span> <a href="index.html#type-st">st</a></span> <span>&#45;&gt;</span> <a href="index.html#type-language">language</a> <span>&#45;&gt;</span> <span>(<span class="type-var">'b</span> <span>&#45;&gt;</span> <span>string list</span>)</span> <span>&#45;&gt;</span> <span class="type-var">'a</span> <span>&#45;&gt;</span> <span>string list</span></code></dt><dd><p>Return all the possible translations of a given object, regardless of the context. This function takes a function with a similar effect on the sentence items.</p></dd></dl><dl><dt class="spec value" id="val-from_json"><a href="#val-from_json" class="anchor"></a><code><span class="keyword">val</span> from_json : string <span>&#45;&gt;</span> string <span>&#45;&gt;</span> <span>string <a href="index.html#type-t">t</a></span> * <span><a href="index.html#type-language">language</a> list</span></code></dt><dd><p><code>from_json fileName fileContent</code> reads the <code>fileContent</code> string as a JSON object representing translations in different languages. It then returns a translation object as well as the list of the found languages in the file.</p></dd></dl><dl><dt class="spec type" id="type-element"><a href="#type-element" class="anchor"></a><code><span class="keyword">type</span> element</code><code> = </code><code>{</code><table class="record"><tr id="type-element.category" class="anchored"><td class="def field"><a href="#type-element.category" class="anchor"></a><code>category : <span>Libutils.Id.t <a href="index.html#type-t">t</a></span>;</code></td><td class="doc"><p>The translations of categories.</p></td></tr><tr id="type-element.category_description" class="anchored"><td class="def field"><a href="#type-element.category_description" class="anchor"></a><code>category_description : <span>Libutils.Id.t <a href="index.html#type-t">t</a></span>;</code></td><td class="doc"><p>The translations of categories’s descriptions.</p></td></tr><tr id="type-element.attribute" class="anchored"><td class="def field"><a href="#type-element.attribute" class="anchor"></a><code>attribute : <span><a href="../Attribute/index.html#type-attribute">Attribute.attribute</a> <a href="index.html#type-t">t</a></span>;</code></td><td class="doc"><p>The translations of attributes.</p></td></tr><tr id="type-element.constructor" class="anchored"><td class="def field"><a href="#type-element.constructor" class="anchor"></a><code>constructor : <span><a href="../Attribute/index.html#type-constructor">Attribute.constructor</a> <a href="index.html#type-gt">gt</a></span>;</code></td><td class="doc"><p>The translations of constructors.</p></td></tr><tr id="type-element.objects" class="anchored"><td class="def field"><a href="#type-element.objects" class="anchor"></a><code>objects : <span>Libutils.Id.t <a href="index.html#type-t">t</a></span>;</code></td><td class="doc"><p>The translations of object kinds.</p></td></tr><tr id="type-element.add" class="anchored"><td class="def field"><a href="#type-element.add" class="anchor"></a><code>add : <span><span>(<a href="index.html#type-language">language</a>, <span><span>(<a href="../Attribute/PlayerAttribute/index.html#type-constructor">Attribute.PlayerAttribute.constructor</a>, <span><a href="index.html#type-tag">tag</a> Libutils.PSet.t</span>)</span> PMap.t</span>)</span> PMap.t</span>;</code></td><td class="doc"><p>For each constructor and language, provides a set of added tags.</p></td></tr></table><code>}</code></dt><dd><p>A type to store each notion used in elements.</p></dd></dl><dl><dt class="spec value" id="val-empty_element"><a href="#val-empty_element" class="anchor"></a><code><span class="keyword">val</span> empty_element : <a href="index.html#type-element">element</a></code></dt><dd><p>A record whose fields are all empty.</p></dd></dl><dl><dt class="spec value" id="val-gfold"><a href="#val-gfold" class="anchor"></a><code><span class="keyword">val</span> gfold : <span>(<span class="type-var">'a</span> <span>&#45;&gt;</span> <span><a href="index.html#type-tag">tag</a> list</span> <span>&#45;&gt;</span> string <span>&#45;&gt;</span> <span><a href="index.html#type-tag">tag</a> Libutils.PSet.t</span> <span>&#45;&gt;</span> <span><a href="index.html#type-tag">tag</a> Libutils.PSet.t</span> <span>&#45;&gt;</span> <span class="type-var">'a</span>)</span> <span>&#45;&gt;</span> <span class="type-var">'a</span> <span>&#45;&gt;</span> <span><span class="type-var">'b</span> <a href="index.html#type-gt">gt</a></span> <span>&#45;&gt;</span> <span class="type-var">'b</span> <span>&#45;&gt;</span> <a href="index.html#type-language">language</a> <span>&#45;&gt;</span> <span class="type-var">'a</span></code></dt><dd><p>Fold over the translations of a particular object and a particular language in a <code>gt</code> translation structure. The propagating function takes as argument the list of tags needed to reach this point, the current translation, the set of tag that are added by this translation, and the set of tags that are removed.</p></dd></dl></div></body></html>
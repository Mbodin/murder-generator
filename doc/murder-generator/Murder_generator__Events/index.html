<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"><head><title>Murder_generator__Events (murder-generator.Murder_generator__Events)</title><link rel="stylesheet" href="../../odoc.css"/><meta charset="utf-8"/><meta name="generator" content="odoc 1.5.0"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><script src="../../highlight.pack.js"></script><script>hljs.initHighlightingOnLoad();</script></head><body><div class="content"><header><nav><a href="../index.html">Up</a> – <a href="../index.html">murder-generator</a> &#x00BB; Murder_generator__Events</nav><h1>Module <code>Murder_generator__Events</code></h1><p>Module Events Describes events as used by the History module.</p></header><dl><dt class="spec type" id="type-event_type"><a href="#type-event_type" class="anchor"></a><code><span class="keyword">type</span> event_type</code><code> = </code><table class="variant"><tr id="type-event_type.For_life_event" class="anchored"><td class="def constructor"><a href="#type-event_type.For_life_event" class="anchor"></a><code>| </code><code><span class="constructor">For_life_event</span></code></td><td class="doc"><p>An event that will continue, reaching the game itself.</p></td></tr><tr id="type-event_type.Long_term_event" class="anchored"><td class="def constructor"><a href="#type-event_type.Long_term_event" class="anchor"></a><code>| </code><code><span class="constructor">Long_term_event</span></code></td><td class="doc"><p>Several years</p></td></tr><tr id="type-event_type.Medium_term_event" class="anchored"><td class="def constructor"><a href="#type-event_type.Medium_term_event" class="anchor"></a><code>| </code><code><span class="constructor">Medium_term_event</span></code></td><td class="doc"><p>Several week</p></td></tr><tr id="type-event_type.Short_term_event" class="anchored"><td class="def constructor"><a href="#type-event_type.Short_term_event" class="anchor"></a><code>| </code><code><span class="constructor">Short_term_event</span></code></td><td class="doc"><p>Several days</p></td></tr><tr id="type-event_type.Very_short_term_event" class="anchored"><td class="def constructor"><a href="#type-event_type.Very_short_term_event" class="anchor"></a><code>| </code><code><span class="constructor">Very_short_term_event</span></code></td><td class="doc"><p>Several minutes</p></td></tr><tr id="type-event_type.Immediate_event" class="anchored"><td class="def constructor"><a href="#type-event_type.Immediate_event" class="anchor"></a><code>| </code><code><span class="constructor">Immediate_event</span></code></td><td class="doc"><p>Less than a minute</p></td></tr></table></dt><dd><p>Each event is associated an event type, which describes whether two events can be at the same time: two events of the same type can not be at the same time.</p></dd></dl><dl><dt class="spec value" id="val-all_event_type"><a href="#val-all_event_type" class="anchor"></a><code><span class="keyword">val</span> all_event_type : <span><a href="index.html#type-event_type">event_type</a> list</span></code></dt><dd><p>The list of all event type.</p></dd></dl><dl><dt class="spec type" id="type-kind"><a href="#type-kind" class="anchor"></a><code><span class="keyword">type</span> <span>'character kind</span></code></dt><dd><p>Event kinds. They can store characters and are parameterised that way.</p></dd></dl><dl><dt class="spec value" id="val-kind_of_id"><a href="#val-kind_of_id" class="anchor"></a><code><span class="keyword">val</span> kind_of_id : Libutils.Id.t <span>&#45;&gt;</span> <span><span class="type-var">'character</span> <a href="index.html#type-kind">kind</a></span></code></dt><dd><p>Build a kind from a kind identifier.</p></dd></dl><dl><dt class="spec value" id="val-kind_of_attribute"><a href="#val-kind_of_attribute" class="anchor"></a><code><span class="keyword">val</span> kind_of_attribute : <a href="../Murder_generator/Attribute/PlayerAttribute/index.html#type-attribute">Murder_generator.Attribute.PlayerAttribute.attribute</a> <span>&#45;&gt;</span> <span><span class="type-var">'character</span> <a href="index.html#type-kind">kind</a></span></code></dt><dd><p>Build a kind from an attribute (meaning that this event provides such an attribute).</p></dd></dl><dl><dt class="spec value" id="val-kind_of_contact"><a href="#val-kind_of_contact" class="anchor"></a><code><span class="keyword">val</span> kind_of_contact : <a href="../Murder_generator/Attribute/ContactAttribute/index.html#type-attribute">Murder_generator.Attribute.ContactAttribute.attribute</a> <span>&#45;&gt;</span> <span class="type-var">'character</span> <span>&#45;&gt;</span> <span><span class="type-var">'character</span> <a href="index.html#type-kind">kind</a></span></code></dt><dd><p>Similar than <code>kind_of_attribute</code>, but for contacts. The target characters is taken as argument.</p></dd></dl><dl><dt class="spec value" id="val-print_kind"><a href="#val-print_kind" class="anchor"></a><code><span class="keyword">val</span> print_kind : <span>(<span class="type-var">'character</span> <span>&#45;&gt;</span> string)</span> <span>&#45;&gt;</span> <span><span class="type-var">'character</span> <a href="index.html#type-kind">kind</a></span> <span>&#45;&gt;</span> string</code></dt><dd><p>A function converting kind to string, for debugging purposes.</p></dd></dl><dl><dt class="spec value" id="val-kind_convert"><a href="#val-kind_convert" class="anchor"></a><code><span class="keyword">val</span> kind_convert : <span>(<span class="type-var">'a</span> <span>&#45;&gt;</span> <span><span class="type-var">'b</span> option</span>)</span> <span>&#45;&gt;</span> <span><span class="type-var">'a</span> <a href="index.html#type-kind">kind</a></span> <span>&#45;&gt;</span> <span><span><span class="type-var">'b</span> <a href="index.html#type-kind">kind</a></span> option</span></code></dt><dd><p>Change each representation of characters in a kind.</p></dd></dl><dl><dt class="spec type" id="type-translation"><a href="#type-translation" class="anchor"></a><code><span class="keyword">type</span> <span>'character translation</span></code><code> = int * <span><span>(int, <span class="type-var">'character</span>)</span> <a href="../Murder_generator/Translation/index.html#type-st">Murder_generator.Translation.st</a></span></code></dt><dd><p>The translations associated to an event.</p></dd></dl><dl><dt class="spec type" id="type-t"><a href="#type-t" class="anchor"></a><code><span class="keyword">type</span> <span>'character t</span></code><code> = </code><code>{</code><table class="record"><tr id="type-t.event_id" class="anchored"><td class="def field"><a href="#type-t.event_id" class="anchor"></a><code>event_id : Libutils.Id.t;</code></td><td class="doc"><p>A unique identifier for a particular event. Note that this identifier is only used in this structure. In particular, the event identifiers used in the History module are not the same ones. This number is conserved during instantiations: each event instantiation thus shares the same identifier.</p></td></tr><tr id="type-t.event_phantom" class="anchored"><td class="def field"><a href="#type-t.event_phantom" class="anchor"></a><code>event_phantom : bool;</code></td><td class="doc"><p>Whether this element is a phantom event, that is an event with no description, which is not displayed in the event list. Such events are useful to create empty buffer areas in the life of characters.</p></td></tr><tr id="type-t.event_blocking" class="anchored"><td class="def field"><a href="#type-t.event_blocking" class="anchor"></a><code>event_blocking : bool;</code></td><td class="doc"><p>Whether this element is blocking, that is, whether it prevents other events from happening at the same time.</p></td></tr><tr id="type-t.event_type" class="anchored"><td class="def field"><a href="#type-t.event_type" class="anchor"></a><code>event_type : <a href="index.html#type-event_type">event_type</a>;</code></td><td class="doc"><p>Two events with the same event type can’t simultaneously involve the same player.</p></td></tr><tr id="type-t.event_attendees" class="anchored"><td class="def field"><a href="#type-t.event_attendees" class="anchor"></a><code>event_attendees : <span><span class="type-var">'character</span> Libutils.PSet.t</span>;</code></td><td class="doc"><p>Characters involved in this event.</p></td></tr><tr id="type-t.all_attendees" class="anchored"><td class="def field"><a href="#type-t.all_attendees" class="anchor"></a><code>all_attendees : <span><span class="type-var">'character</span> list</span>;</code></td><td class="doc"><p>Only used when importing the event: the list of attendees declared in the full event.</p></td></tr><tr id="type-t.event_kinds" class="anchored"><td class="def field"><a href="#type-t.event_kinds" class="anchor"></a><code>event_kinds : <span><span>(<span class="type-var">'character</span>, <span><span><span class="type-var">'character</span> <a href="index.html#type-kind">kind</a></span> Libutils.PSet.t</span>)</span> PMap.t</span>;</code></td><td class="doc"><p>The set of event kinds that this event inherits from, for each player.</p></td></tr><tr id="type-t.constraints_none" class="anchored"><td class="def field"><a href="#type-t.constraints_none" class="anchor"></a><code>constraints_none : <span><span>(<span class="type-var">'character</span>, <span><span><span class="type-var">'character</span> <a href="index.html#type-kind">kind</a></span> Libutils.PSet.t</span> * <span><span><span class="type-var">'character</span> <a href="index.html#type-kind">kind</a></span> Libutils.PSet.t</span>)</span> PMap.t</span>;</code></td><td class="doc"><p>For each attendee of the event, provide two sets of kinds: one for before and one for after this event. None of these combinations of kinds and characters should appear before (respectively after) this event.</p></td></tr><tr id="type-t.constraints_some" class="anchored"><td class="def field"><a href="#type-t.constraints_some" class="anchor"></a><code>constraints_some : <span><span>(<span class="type-var">'character</span>, <span><span><span class="type-var">'character</span> <a href="index.html#type-kind">kind</a></span> Libutils.PSet.t</span> * <span><span><span class="type-var">'character</span> <a href="index.html#type-kind">kind</a></span> Libutils.PSet.t</span>)</span> PMap.t</span>;</code></td><td class="doc"><p>Same as <code>constraints_none</code>, but instead of requiring no such events, it requires that at least one of this kind and character combination appear before (respectively after) for each element of these sets.</p></td></tr><tr id="type-t.translation" class="anchored"><td class="def field"><a href="#type-t.translation" class="anchor"></a><code>translation : <span><span class="type-var">'character</span> <a href="index.html#type-translation">translation</a></span>;</code></td><td class="doc"><p>How this event can be worded.</p></td></tr></table><code>}</code></dt><dd><p>The structure of an event. This structure stores all the needed information to describe the event, but lacks any mention of its date and dependencies. See the History module for a richer type. Events are parameterised by the kind of characters.</p></dd></dl><dl><dt class="spec value" id="val-compare"><a href="#val-compare" class="anchor"></a><code><span class="keyword">val</span> compare : <span><span class="type-var">'a</span> <a href="index.html#type-t">t</a></span> <span>&#45;&gt;</span> <span><span class="type-var">'a</span> <a href="index.html#type-t">t</a></span> <span>&#45;&gt;</span> int</code></dt><dd><p>Comparing the whole structure <code>t</code> can take some time. However, in practise, only a few fields are really needed to be compared due to a lot of invariants in the program. This function only compares the relevant fields.</p></dd></dl><dl><dt class="spec value" id="val-get_attendees_list"><a href="#val-get_attendees_list" class="anchor"></a><code><span class="keyword">val</span> get_attendees_list : <span><span class="type-var">'character</span> <a href="index.html#type-t">t</a></span> <span>&#45;&gt;</span> <span><span class="type-var">'character</span> list</span></code></dt><dd><p>Given an event, return its list of attendees.</p></dd></dl><dl><dt class="spec value" id="val-print_event"><a href="#val-print_event" class="anchor"></a><code><span class="keyword">val</span> print_event : <span><span class="type-var">'a</span> <a href="index.html#type-t">t</a></span> <span>&#45;&gt;</span> string</code></dt><dd><p>Provides a recoverable identifier for an event.</p></dd></dl><dl><dt class="spec value" id="val-instantiate"><a href="#val-instantiate" class="anchor"></a><code><span class="keyword">val</span> instantiate : <span>(<span class="type-var">'a</span> <span>&#45;&gt;</span> <span><span class="type-var">'b</span> option</span>)</span> <span>&#45;&gt;</span> <span><span class="type-var">'a</span> <a href="index.html#type-t">t</a></span> <span>&#45;&gt;</span> <span><span><span class="type-var">'b</span> <a href="index.html#type-t">t</a></span> option</span></code></dt><dd><p>Given an instantiation of characters, instantiate an event.</p></dd></dl><dl><dt class="spec value" id="val-partially_instantiate"><a href="#val-partially_instantiate" class="anchor"></a><code><span class="keyword">val</span> partially_instantiate : <span class="type-var">'a</span> <span>&#45;&gt;</span> <span class="type-var">'b</span> <span>&#45;&gt;</span> <span><span class="type-var">'a</span> <a href="index.html#type-t">t</a></span> <span>&#45;&gt;</span> <span><span><span class="type-var">'b</span> <a href="index.html#type-t">t</a></span> option</span></code></dt><dd><p>This is kind of a silly function, but we need it in the Element module to quickly evaluate whether a given character can be instantiated as a particular character in an element in general (and in particuar, in a particular event). To do this, we first have to evaluate which character may be instantiated in each slot, only considering its particular constraints before considering the global ones. This enables to filter out in a first pass characters that obviously can’t be instantiated by a particular event before considering each possibilities in an exponential way. This function projects a partial event to an event… pretending that it only features one character. This event is such that if the full event applies, then the projection also applies (but the projection might apply even if the full event does not). The first argument is the local name of the character and the second its instantiation. The translation part of this event is not to be used.</p></dd></dl></div></body></html>
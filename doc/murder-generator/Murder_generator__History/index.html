<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"><head><title>Murder_generator__History (murder-generator.Murder_generator__History)</title><link rel="stylesheet" href="../../odoc.css"/><meta charset="utf-8"/><meta name="generator" content="odoc 1.5.0"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><script src="../../highlight.pack.js"></script><script>hljs.initHighlightingOnLoad();</script></head><body><div class="content"><header><nav><a href="../index.html">Up</a> – <a href="../index.html">murder-generator</a> &#x00BB; Murder_generator__History</nav><h1>Module <code>Murder_generator__History</code></h1><p>Module History Stores the timeline of characters.</p></header><dl><dt class="spec type" id="type-character"><a href="#type-character" class="anchor"></a><code><span class="keyword">type</span> character</code><code> = Libutils.Id.t</code></dt><dt class="spec type" id="type-event"><a href="#type-event" class="anchor"></a><code><span class="keyword">type</span> event</code><code> = </code><code>{</code><table class="record"><tr id="type-event.event_begin" class="anchored"><td class="def field"><a href="#type-event.event_begin" class="anchor"></a><code>event_begin : Libutils.Date.t;</code></td><td class="doc"><p>Beginning of the event</p></td></tr><tr id="type-event.event_end" class="anchored"><td class="def field"><a href="#type-event.event_end" class="anchor"></a><code>event_end : Libutils.Date.t;</code></td><td class="doc"><p>End of the event</p></td></tr><tr id="type-event.event" class="anchored"><td class="def field"><a href="#type-event.event" class="anchor"></a><code>event : <span><a href="index.html#type-character">character</a> <a href="../Murder_generator/Events/index.html#type-t">Murder_generator.Events.t</a></span>;</code></td><td class="doc"><p>The actual event</p></td></tr></table><code>}</code></dt><dd><p>This type enriches <code>Events.t</code> with a date and duration.</p></dd></dl><dl><dt class="spec value" id="val-generate_event"><a href="#val-generate_event" class="anchor"></a><code><span class="keyword">val</span> generate_event : Libutils.Date.t <span>&#45;&gt;</span> <span><a href="index.html#type-character">character</a> <a href="../Murder_generator/Events/index.html#type-t">Murder_generator.Events.t</a></span> <span>&#45;&gt;</span> <a href="index.html#type-event">event</a></code></dt><dd><p>A smart constructor for events. It takes its starting date and an event and associates it with an actual duration.</p></dd></dl><dl><dt class="spec value" id="val-generate_event_inv"><a href="#val-generate_event_inv" class="anchor"></a><code><span class="keyword">val</span> generate_event_inv : Libutils.Date.t <span>&#45;&gt;</span> <span><a href="index.html#type-character">character</a> <a href="../Murder_generator/Events/index.html#type-t">Murder_generator.Events.t</a></span> <span>&#45;&gt;</span> <a href="index.html#type-event">event</a></code></dt><dd><p>Same as <code>generate_event</code>, but takes as argument the ending date of an event.</p></dd></dl><dl><dt class="spec value" id="val-get_event_type"><a href="#val-get_event_type" class="anchor"></a><code><span class="keyword">val</span> get_event_type : Libutils.Date.t <span>&#45;&gt;</span> Libutils.Date.t <span>&#45;&gt;</span> <a href="../Murder_generator/Events/index.html#type-event_type">Murder_generator.Events.event_type</a></code></dt><dd><p>Infer the kind of event from its starting and ending dates.</p></dd></dl><dl><dt class="spec value" id="val-compatible_events"><a href="#val-compatible_events" class="anchor"></a><code><span class="keyword">val</span> compatible_events : <a href="index.html#type-event">event</a> <span>&#45;&gt;</span> <a href="index.html#type-event">event</a> <span>&#45;&gt;</span> bool</code></dt><dd><p>States whether two events are compatible, that is that they do not overlap, or that they are of different types.</p></dd></dl><dl><dt class="spec type" id="type-t"><a href="#type-t" class="anchor"></a><code><span class="keyword">type</span> t</code></dt><dd><p>The global timeline, storing all events that happenned. This typed is used when looking for solution to constraints and only stores the relevant interactions between events.</p></dd></dl><dl><dt class="spec type" id="type-final"><a href="#type-final" class="anchor"></a><code><span class="keyword">type</span> final</code><code> = <span><a href="index.html#type-event">event</a> list</span></code></dt><dd><p>The final type, where each event have actually been assigned a particular moment in type. The events are guaranteed to be ordered along their start time.</p></dd></dl><dl><dt class="spec type" id="type-status"><a href="#type-status" class="anchor"></a><code><span class="keyword">type</span> status</code><code> = </code><table class="variant"><tr id="type-status.Normal" class="anchored"><td class="def constructor"><a href="#type-status.Normal" class="anchor"></a><code>| </code><code><span class="constructor">Normal</span></code></td><td class="doc"><p>Any given player can only have this element once.</p></td></tr><tr id="type-status.Duplicable" class="anchored"><td class="def constructor"><a href="#type-status.Duplicable" class="anchor"></a><code>| </code><code><span class="constructor">Duplicable</span></code></td><td class="doc"><p>This element can be applied without any restriction.</p></td></tr><tr id="type-status.Unique" class="anchored"><td class="def constructor"><a href="#type-status.Unique" class="anchor"></a><code>| </code><code><span class="constructor">Unique</span></code></td><td class="doc"><p>This element can be applied at most once in the whole scenario.</p></td></tr></table></dt><dd><p>Describes the status of elements with respect to their behaviours with timelines. Most elements are <code>Normal</code>, but some have special behaviours.</p></dd></dl><dl><dt class="spec value" id="val-compatible_and_progress"><a href="#val-compatible_and_progress" class="anchor"></a><code><span class="keyword">val</span> compatible_and_progress : <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> <span><a href="index.html#type-character">character</a> <a href="../Murder_generator/Events/index.html#type-t">Murder_generator.Events.t</a></span> <span>&#45;&gt;</span> <span><span>bool Stdlib.Lazy.t</span> option</span></code></dt><dd><p>States whether an event is compatible with a timeline. Its return value is the same as <code>Element.compatible_and_progress</code>: <code>None</code> if incompatible, <code>Some false</code> is compatible but does not help with the already present constraints, and finally <code>Some true</code> means that this event not only applies, but it helps the already present events.</p></dd></dl><dl><dt class="spec value" id="val-lcompatible_and_progress"><a href="#val-lcompatible_and_progress" class="anchor"></a><code><span class="keyword">val</span> lcompatible_and_progress : <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> <span><span><a href="index.html#type-character">character</a> <a href="../Murder_generator/Events/index.html#type-t">Murder_generator.Events.t</a></span> list</span> <span>&#45;&gt;</span> <span><span>bool Stdlib.Lazy.t</span> option</span></code></dt><dd><p>States whether a list of events is compatible with a timeline, assuming that each event has to be in this particular order.</p></dd></dl><dl><dt class="spec value" id="val-apply"><a href="#val-apply" class="anchor"></a><code><span class="keyword">val</span> apply : <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> <a href="index.html#type-status">status</a> <span>&#45;&gt;</span> <span><a href="index.html#type-character">character</a> <a href="../Murder_generator/Events/index.html#type-t">Murder_generator.Events.t</a></span> <span>&#45;&gt;</span> <a href="index.html#type-t">t</a></code></dt><dd><p>Apply an event to a timeline. This function should only be called on events for which <code>compatible_and_progress</code> returns <code>Some</code>.</p></dd></dl><dl><dt class="spec value" id="val-lapply"><a href="#val-lapply" class="anchor"></a><code><span class="keyword">val</span> lapply : <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> <a href="index.html#type-status">status</a> <span>&#45;&gt;</span> <span><span><a href="index.html#type-character">character</a> <a href="../Murder_generator/Events/index.html#type-t">Murder_generator.Events.t</a></span> list</span> <span>&#45;&gt;</span> <a href="index.html#type-t">t</a></code></dt><dd><p>Same as <code>apply</code>, but for a list of events for which <code>lcompatible_and_progress</code> returns <code>Some</code>. Their relative order will be conserved.</p></dd></dl><dl><dt class="spec value" id="val-copy"><a href="#val-copy" class="anchor"></a><code><span class="keyword">val</span> copy : <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> <a href="index.html#type-t">t</a></code></dt><dd><p>(Deeply) copies the state.</p></dd></dl><dl><dt class="spec value" id="val-create_state"><a href="#val-create_state" class="anchor"></a><code><span class="keyword">val</span> create_state : int <span>&#45;&gt;</span> <a href="index.html#type-t">t</a></code></dt><dd><p>Creates an empty history state for the given number <code>n</code> of characters, each indexed from <code>0</code> to <code>n - 1</code>.</p></dd></dl><dl><dt class="spec value" id="val-finalise"><a href="#val-finalise" class="anchor"></a><code><span class="keyword">val</span> finalise : <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> Libutils.Date.t <span>&#45;&gt;</span> <a href="index.html#type-final">final</a></code></dt><dd><p>Provide an actual instantiation of each event’s date and time. It needs the date of the played scenario.</p></dd></dl><dl><dt class="spec value" id="val-unfinalise"><a href="#val-unfinalise" class="anchor"></a><code><span class="keyword">val</span> unfinalise : <a href="index.html#type-final">final</a> <span>&#45;&gt;</span> <a href="index.html#type-t">t</a></code></dt><dd><p>Inverse of <code>finalise</code>. There may be additional connections in the generated timeline than in the original one. This function only recovers what is possible to recover from the type <code>final</code>.</p></dd></dl><dl><dt class="spec value" id="val-fold_graph"><a href="#val-fold_graph" class="anchor"></a><code><span class="keyword">val</span> fold_graph : <span>(<span class="type-var">'a</span> <span>&#45;&gt;</span> <span><a href="index.html#type-character">character</a> <a href="../Murder_generator/Events/index.html#type-t">Murder_generator.Events.t</a></span> <span>&#45;&gt;</span> Libutils.Id.t <span>&#45;&gt;</span> <span>(<span>Libutils.Id.t list</span> * <span>Libutils.Id.t list</span>)</span> <span>&#45;&gt;</span> <span class="type-var">'a</span>)</span> <span>&#45;&gt;</span> <span class="type-var">'a</span> <span>&#45;&gt;</span> <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> <span class="type-var">'a</span></code></dt><dd><p>Fold over the event graph. At each step, we are given an event, its identifier, and two lists of identifiers, corresponding to the events before and after the current event.</p></dd></dl><dl><dt class="spec value" id="val-all_players_length"><a href="#val-all_players_length" class="anchor"></a><code><span class="keyword">val</span> all_players_length : int <span>&#45;&gt;</span> <span><a href="index.html#type-character">character</a> list</span></code></dt><dd><p>Given a number of player, return the associated characters identifiers. The existence of this function implies that character identifiers are fixed accross all executions and really only depends on the total number of players.</p></dd></dl></div></body></html>